var NaiveBayesClassifier;NaiveBayesClassifier=function(){function e(e){this.vocabulary={},this.vocabularySize=0,this.expressions={},this.expressionsSize=0,this.tokens={},e&&(this.tokenize=e)}return e.prototype.learn=function(e,t){var s,i,n,r,o,u;null==(r=this.expressions)[e]&&(r[e]={learned:{},count:0}),this.expressions[e].learned[t]=!0,this.expressions[e].count++,this.expressionsSize++,null==(o=this.tokens)[e]&&(o[e]={frequency:{},count:0}),s=this.tokens[e],u=this.tokenFrequency(t);for(n in u)i=u[n],this.vocabulary[n]=!0,this.vocabularySize++,s.frequency[n]||(s.frequency[n]=0),s.frequency[n]+=i,s.count+=i;return this},e.prototype.categories=function(e){var t,s,i,n,r,o,u,a,c,h,l,p;u={},o=this.tokenFrequency(e),p=this.expressions;for(t in p){for(n=p[t],s=n.count/this.expressionsSize,i=this.tokens[t],r=h=0,l=o.length;l>h;r=++h)a=o[r],c=(i.frequency[a]+1)/(i.count+this.vocabularySize),s+=r*c;u[t]=s}return u},e.prototype.categorize=function(e){var t,s,i,n,r;s=-1/0,i=null,r=this.categories(e);for(t in r)n=r[t],n>s&&(s=n,i=t);return i},e.prototype.tokenize=function(e){return e.replace(/[^\w\s]/g," ").split(/\s+/)},e.prototype.tokenFrequency=function(e){var t,s,i,n,r;for(t={},r=this.tokenize(e),i=0,n=r.length;n>i;i++)s=r[i],t[s]||(t[s]=0),t[s]++;return t},e}(),module.exports=NaiveBayesClassifier;