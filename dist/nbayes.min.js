var NaiveBayesClassifier;NaiveBayesClassifier=function(){function e(e){this.vocabulary={},this.vocabularySize=0,this.expressions={},this.expressionsSize=0,this.tokens={},e&&(this.tokenize=e)}return e.prototype.learn=function(e,s){var t,i,n,r,o,u;null==(r=this.expressions)[e]&&(r[e]={learned:{},count:0}),this.expressions[e].learned[s]=!0,this.expressions[e].count++,this.expressionsSize++,null==(o=this.tokens)[e]&&(o[e]={frequency:{},count:0}),t=this.tokens[e],u=this.tokenFrequency(s);for(n in u)i=u[n],this.vocabulary[n]||(this.vocabulary[n]=!0,this.vocabularySize++),t.frequency[n]||(t.frequency[n]=0),t.frequency[n]+=i,t.count+=i;return this},e.prototype.categories=function(e){var s,t,i,n,r,o,u,a,c,h;u={},r=this.tokenFrequency(e),h=this.expressions;for(s in h){i=h[s],o=i.count/this.expressionsSize,t=this.tokens[s];for(a in r)n=r[a],c=((t.frequency[a]||0)+1)/(t.count+this.vocabularySize),o*=Math.pow(c,n);u[s]=o}return u},e.prototype.categorize=function(e){var s,t,i,n,r;t=-1/0,i=null,r=this.categories(e);for(s in r)n=r[s],n>t&&(t=n,i=s);return i},e.prototype.tokenFrequency=function(e){var s,t,i,n,r;for(s={},r=e.replace(/[^\w\s]/g," ").split(/\s+/),i=0,n=r.length;n>i;i++)t=r[i],""!==t&&(s[t]||(s[t]=0),s[t]++);return s},e}(),module.exports=NaiveBayesClassifier;