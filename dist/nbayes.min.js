var NaiveBayesClassifier;NaiveBayesClassifier=function(){function e(){this.vocabulary={},this.vocabularySize=0,this.expressions={},this.expressionsSize=0,this.tokens={}}return e.prototype.learn=function(e,s){var t,i,n,r,o,u;null==(r=this.expressions)[e]&&(r[e]={learned:{},count:0}),this.expressions[e].learned[s]=!0,this.expressions[e].count++,this.expressionsSize++,null==(o=this.tokens)[e]&&(o[e]={frequency:{},count:0}),t=this.tokens[e],u=this.tokenFrequency(s);for(n in u)i=u[n],this.vocabulary[n]=!0,this.vocabularySize++,t.frequency[n]||(t.frequency[n]=0),t.frequency[n]+=i,t.count+=i;return this},e.prototype.categories=function(e){var s,t,i,n,r,o,u,a,c,h,l,y;u={},o=this.tokenFrequency(e),y=this.expressions;for(s in y){for(n=y[s],t=n.count/this.expressionsSize,i=this.tokens[s],r=h=0,l=o.length;l>h;r=++h)a=o[r],c=(i.frequency[a]+1)/(i.count+this.vocabularySize),t+=r*c;u[s]=t}return u},e.prototype.categorize=function(e){var s,t,i,n,r;t=-1/0,i=null,r=this.categories(e);for(s in r)n=r[s],n>t&&(t=n,i=s);return i},e.prototype.tokenFrequency=function(e){var s,t,i,n,r;for(s={},r=e.replace(/[^\w\s]/g," ").split(/\s+/),i=0,n=r.length;n>i;i++)t=r[i],s[t]||(s[t]=0),s[t]++;return s},e}(),module.exports=NaiveBayesClassifier;